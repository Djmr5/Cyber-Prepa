{% extends 'layout/base.html' %}
{% load static %}

{% block title %}
Rental Admin CRUD
{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'vendor/bootstrap-5.2.3-dist/css/bootstrap.min.css' %}">
<link rel="stylesheet" href="{% static 'vendor/DataTables/datatables.min.css' %}">
<link rel="stylesheet" href="{% static 'vendor/fontawesome-free-6.4.2-web/css/all.min.css' %}">
{% endblock %}

{% block content %}
<h1>Bienvenido a Ciber Tec</h1>
<p>This is the admin page</p>
<div class="crud-tables container">
    <div class="row">
        <div class="col-sm-12 col-md-12 col-lg-12 col-xl-12">
            <div class="table-responsive">
                <h2 class="table-title">Plays Table</h2>
                <table id="plays-table-test" class="table">
                    <caption>
                        Registro de veces que un estudiante ha jugado un juego
                    </caption>
                    <thead>
                        <tr>
                            <th class="centered">Student</th>
                            <th class="centered">Game</th>
                            <th class="centered">Time</th>
                            <th class="centered">Ended</th>
                            <th class="centered">Options</th>
                        </tr>
                    </thead>
                    <tbody id="tableBody_plays">
                        
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div class="table-responsive">
        <h2 class="table-title">Students Table</h2>
        <table id="students-table" class="table table-striped table-bordered">
            <thead>
                <tr>
                    <th>Student ID</th>
                    <th>Student Name</th>
                </tr>
            </thead>
            <tbody>
                {% for student in students %}
                <tr>
                    <td>{{ student.id }}</td>
                    <td>{{ student.name }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    <div class="table-responsive">
        <h2 class="table-title">Plays Table</h2>
        <table id="plays-table" class="table table-striped table-bordered">
            <thead>
                <tr>
                    <th>Student</th>
                    <th>Game</th>
                    <th>Time</th>
                    <th>Ended</th>
                </tr>
            </thead>
            <tbody>
                {% for play in plays %}
                <tr>
                    <td>{{ play.student.id }}</td>
                    <td>{{ play.game.name }}</td>
                    <td>{{ play.time }}</td>
                    <td>{{ play.ended }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    <div class="table-responsive">
        <h2 class="table-title">Games Table</h2>
        <table id="games-table" class="table table-striped table-bordered">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Name</th>
                    <th>Display Name</th>
                    <th>Available</th>
                    <th>Show</th>
                </tr>
            </thead>
            <tbody>
                {% for game in games %}
                <tr>
                    <td>{{ game.id }}</td>
                    <td>{{ game.name }}</td>
                    <td>{{ game.displayName }}</td>
                    <td>{{ game.available }}</td>
                    <td>{{ game.show }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    <div class="table-responsive">
        <h2 class="table-title">Logs Table</h2>
        <table id="logs-table" class="table table-striped table-bordered">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>User</th>
                    <th>Action Performed</th>
                    <th>Time</th>
                </tr>
            </thead>
            <tbody>
                {% for log in logs %}
                <tr>
                    <td>{{ log.id }}</td>
                    <td>{{ log.user.username }}</td>
                    <td>{{ log.actionPerformed }}</td>
                    <td>{{ log.time }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    <div class="table-responsive">
        <h2 class="table-title">Sanctions Table</h2>
        <table id="sanctions-table" class="table table-striped table-bordered">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Student</th>
                    <th>Cause</th>
                    <th>Play Reference</th>
                    <th>Start Time</th>
                    <th>End Time</th>
                </tr>
            </thead>
            <tbody>
                {% for sanction in sanctions %}
                <tr>
                    <td>{{ sanction.id }}</td>
                    <td>{{ sanction.student.id }}</td>
                    <td>{{ sanction.cause }}</td>
                    <td>{{ sanction.play.id }}</td>
                    <td>{{ sanction.start_time }}</td>
                    <td>{{ sanction.end_time }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

{% endblock %}

{% block js %}
<!-- Added Popper through CDN -->
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous"></script>
<script src="{% static 'vendor/bootstrap-5.2.3-dist/js/bootstrap.min.js' %}"></script>
<script src="{% static 'vendor/DataTables/datatables.min.js' %}"></script>
<script src="{% static 'js/admin.js' %}"></script>
<script>
    $(document).ready(function () {
        $('#students-table').DataTable();
        $('#plays-table').DataTable();
        $('#games-table').DataTable();
        $('#logs-table').DataTable();
        $('#sanctions-table').DataTable();
    });
</script>
{% endblock %}